{"ast":null,"code":"import _regeneratorRuntime from\"/home/jubran/general_assembly/sei/Flamingos/unit_3/homework/Gnome-A-zon/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/jubran/general_assembly/sei/Flamingos/unit_3/homework/Gnome-A-zon/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/jubran/general_assembly/sei/Flamingos/unit_3/homework/Gnome-A-zon/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"/home/jubran/general_assembly/sei/Flamingos/unit_3/homework/Gnome-A-zon/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/home/jubran/general_assembly/sei/Flamingos/unit_3/homework/Gnome-A-zon/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/jubran/general_assembly/sei/Flamingos/unit_3/homework/Gnome-A-zon/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import{Redirect}from'react-router-dom';import{createGnome}from'../../services/gnomes.js';import Layout from'../../components/Layout/Layout.jsx';import MaterialSelect from'../../components/MaterialSelect/MaterialSelect.jsx';import CollectionSelect from'../../components/CollectionSelect/CollectionSelect.jsx';import'./ProductCreate.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ProductCreate(props){var _useState=useState({name:'',price:'',details:'',image_url:'',category:[],materials:[],seller:props.user?props.user.id:null}),_useState2=_slicedToArray(_useState,2),gnome=_useState2[0],setGnome=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isCreated=_useState4[0],setCreated=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),selectedMaterials=_useState6[0],setSelectedMaterials=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),selectedCollections=_useState8[0],setSelectedCollections=_useState8[1];useEffect(function(){setGnome(_objectSpread(_objectSpread({},gnome),{},{materials:_toConsumableArray(selectedMaterials),category:_toConsumableArray(selectedCollections)}));},[selectedCollections,selectedMaterials]);var handleChange=function handleChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setGnome(_objectSpread(_objectSpread({},gnome),{},_defineProperty({},name,value)));};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var created;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();setGnome(_objectSpread(_objectSpread({},gnome),{},{materials:_toConsumableArray(selectedMaterials),category:_toConsumableArray(selectedCollections),seller:props.user.id}));_context.next=4;return createGnome(gnome);case 4:created=_context.sent;setCreated({created:created});case 6:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();if(isCreated){return/*#__PURE__*/_jsx(Redirect,{to:'/gnomes'});}if(!props.user||Object.keys(props.user).length===0){return/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(\"h3\",{children:\"Please sign in to add a gnome to the market.\"})});}else{return/*#__PURE__*/_jsx(Layout,{user:props.user,children:/*#__PURE__*/_jsx(\"div\",{className:\"forms-screen-pc\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"forms-card-pc\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"form-title-pc\",children:\"Sell a Gnome\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"create-form-pc\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-label-input-div-pc\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"label-div-pc\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name-input\",children:\"Gnome Name:\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name-input\",className:\"name-input form-input-pc\",name:\"name\",value:gnome.name,onChange:handleChange,required:true,autoFocus:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-label-input-div-pc\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"label-div-pc\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"price-input\",children:\"Price: \"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"price-input\",className:\"price-input-pc form-input-pc\",name:\"price\",value:gnome.price,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-label-input-div-pc\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"label-div-pc\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"details-input\",children:\"Details: \"})}),/*#__PURE__*/_jsx(\"textarea\",{id:\"details-input\",className:\"details-input-pc form-input-pc\",name:\"details\",rows:\"4\",value:gnome.details,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-label-input-div-pc\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"label-div-pc\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"imageURL-input\",children:\"Image URL: \"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"imageURL-input\",className:\"imageURL-input-pc form-input-pc\",name:\"image_url\",value:gnome.image_url,onChange:handleChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-label-input-div-pc\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"label-div-pc\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"materials-input\",children:\"Materials: \"})}),/*#__PURE__*/_jsx(MaterialSelect,{setSelectedMaterials:setSelectedMaterials,selectedMaterials:selectedMaterials})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-label-input-div-pc\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"label-div-pc\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category-input\",children:\"Category: \"})}),/*#__PURE__*/_jsx(CollectionSelect,{selectedCollections:selectedCollections,setSelectedCollections:setSelectedCollections})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"form-submit-button-pc btn btn-slide-up\",children:\"Submit\"})]})]})})});}}export default ProductCreate;","map":{"version":3,"sources":["/home/jubran/general_assembly/sei/Flamingos/unit_3/homework/Gnome-A-zon/client/src/screens/ProductCreate/ProductCreate.jsx"],"names":["useState","useEffect","Redirect","createGnome","Layout","MaterialSelect","CollectionSelect","ProductCreate","props","name","price","details","image_url","category","materials","seller","user","id","gnome","setGnome","isCreated","setCreated","selectedMaterials","setSelectedMaterials","selectedCollections","setSelectedCollections","handleChange","e","target","value","handleSubmit","preventDefault","created","Object","keys","length"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react'\nimport { Redirect } from 'react-router-dom'\nimport { createGnome } from '../../services/gnomes.js'\nimport Layout from '../../components/Layout/Layout.jsx'\nimport MaterialSelect from '../../components/MaterialSelect/MaterialSelect.jsx'\nimport CollectionSelect from '../../components/CollectionSelect/CollectionSelect.jsx'\nimport './ProductCreate.css'\n\nfunction ProductCreate(props) {\n\n  const [gnome, setGnome] = useState( {\n    name: '',\n    price: '',\n    details: '',\n    image_url: '',\n    category: [],\n    materials: [],\n    seller: props.user ? props.user.id : null\n  });\n\n  const [isCreated, setCreated] = useState(false);\n\n  const [selectedMaterials, setSelectedMaterials] = useState([]);\n  const [selectedCollections, setSelectedCollections] = useState([]);\n\n  useEffect(()=>{\n    setGnome({...gnome, materials: [...selectedMaterials], category: [...selectedCollections]})\n  },[selectedCollections, selectedMaterials])\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setGnome({\n      ...gnome,\n      [name]: value\n    })\n  }\n\n\n  const handleSubmit = async(e) => {\n    e.preventDefault();\n    setGnome({...gnome, materials: [...selectedMaterials], category: [...selectedCollections], seller: props.user.id});\n    const created = await createGnome(gnome);\n    setCreated({ created })\n  }\n\n  if(isCreated) {\n    return <Redirect to={'/gnomes'} />\n  }\n\n  if(!props.user || Object.keys(props.user).length === 0) {\n    return (\n      <Layout>\n        <h3>Please sign in to add a gnome to the market.</h3>\n      </Layout>\n    )\n  } else {\n\n  return (\n    <Layout user={props.user}>\n      <div className='forms-screen-pc'>\n        <div className='forms-card-pc'>\n          <h3 className='form-title-pc'>Sell a Gnome</h3>\n          <form className='create-form-pc' onSubmit={handleSubmit}>\n\n\n            <div className='form-label-input-div-pc'>\n              <div className=\"label-div-pc\">\n                  <label htmlFor=\"name-input\">Gnome Name:</label>\n                </div>\n              <input \n                type=\"text\" \n                id=\"name-input\"\n                className=\"name-input form-input-pc\"\n                name=\"name\"\n                value={gnome.name}\n                onChange={handleChange}\n                required\n                autoFocus\n              />\n            </div>\n\n            <div className='form-label-input-div-pc'>\n              <div className=\"label-div-pc\">\n                <label htmlFor=\"price-input\">Price: </label>\n              </div>\n              <input\n                type=\"text\" \n                id=\"price-input\"\n                className=\"price-input-pc form-input-pc\"\n                name=\"price\"\n                value={gnome.price}\n                onChange={handleChange}\n                required\n              />\n            </div>\n\n            <div className='form-label-input-div-pc'>\n              <div className=\"label-div-pc\">\n                <label htmlFor=\"details-input\">Details: </label>\n              </div>\n              <textarea \n                id=\"details-input\"\n                className=\"details-input-pc form-input-pc\"\n                name=\"details\"\n                rows = \"4\"\n                value={gnome.details}\n                onChange={handleChange}\n                required\n              />\n            </div>\n\n            <div className='form-label-input-div-pc'>\n              <div className=\"label-div-pc\">\n                <label htmlFor=\"imageURL-input\">Image URL: </label>\n              </div>\n              <input \n                type=\"text\" \n                id=\"imageURL-input\"\n                className=\"imageURL-input-pc form-input-pc\"\n                name=\"image_url\"\n                value={gnome.image_url}\n                onChange={handleChange}\n                required\n            />\n            </div>\n\n            <div className='form-label-input-div-pc'>  \n              <div className=\"label-div-pc\">   \n                <label htmlFor=\"materials-input\">Materials: </label>\n              </div>\n              <MaterialSelect setSelectedMaterials={setSelectedMaterials} selectedMaterials={selectedMaterials}/>\n            </div> \n\n            <div className='form-label-input-div-pc'>\n              <div className=\"label-div-pc\">\n                <label htmlFor=\"category-input\">Category: </label>\n              </div>\n              <CollectionSelect selectedCollections ={selectedCollections} setSelectedCollections={setSelectedCollections}\n              />\n            </div>\n            <button type=\"submit\" className=\"form-submit-button-pc btn btn-slide-up\">Submit</button>\n          </form>\n        </div>\n      </div>\n    </Layout>\n  )\n}\n}\n\nexport default ProductCreate;"]},"metadata":{},"sourceType":"module"}