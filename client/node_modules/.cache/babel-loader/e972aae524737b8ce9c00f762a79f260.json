{"ast":null,"code":"import _regeneratorRuntime from\"/home/jubran/general_assembly/sei/Flamingos/unit_3/homework/Gnome-A-zon/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/jubran/general_assembly/sei/Flamingos/unit_3/homework/Gnome-A-zon/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/jubran/general_assembly/sei/Flamingos/unit_3/homework/Gnome-A-zon/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from\"react\";import\"./ProductDetails.css\";import{getGnome,deleteGnome}from\"../../services/gnomes\";import Layout from\"../../components/Layout/Layout.jsx\";import{useParams,Link,useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function GnomeDetails(props){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),gnome=_useState2[0],setGnome=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loaded=_useState4[0],setLoaded=_useState4[1];var _useParams=useParams(),id=_useParams.id;var history=useHistory();useEffect(function(){var fetchGnome=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var gnome;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getGnome(id);case 2:gnome=_context.sent;setGnome(gnome);setLoaded(gnome);case 5:case\"end\":return _context.stop();}}},_callee);}));return function fetchGnome(){return _ref.apply(this,arguments);};}();fetchGnome();},[id]);var handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return deleteGnome(gnome._id);case 2:history.push(\"/gnomes\");case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function handleDelete(){return _ref2.apply(this,arguments);};}();var showUserOptions=function showUserOptions(){if(props.user&&gnome&&Object.keys(gnome).length!==0){if(props.user.id===gnome.seller._id){return/*#__PURE__*/_jsxs(\"div\",{id:\"buttons\",children:[/*#__PURE__*/_jsx(Link,{to:\"/edit/\".concat(gnome._id),children:/*#__PURE__*/_jsx(\"button\",{className:\"btn-slide-left\",id:\"edit\",children:\"Edit\"})}),/*#__PURE__*/_jsx(\"button\",{id:\"delete\",onClick:handleDelete,children:\"Delete\"})]});}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"seller-info-div\",children:[/*#__PURE__*/_jsxs(\"p\",{id:\"sold\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Sold by:\"}),\" \",gnome.seller.username]}),/*#__PURE__*/_jsxs(\"a\",{id:\"email\",href:\"mailto: \".concat(gnome.seller.email),children:[/*#__PURE__*/_jsx(\"span\",{children:\"Email:\"}),\" \",gnome.seller.email]})]});}}else if(gnome&&Object.keys(gnome).length!==0){return/*#__PURE__*/_jsxs(\"div\",{className:\"seller-info-div\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Sold by: \",gnome.seller.username]}),/*#__PURE__*/_jsxs(\"a\",{href:\"mailto: \".concat(gnome.seller.email),children:[\"Email: \",gnome.seller.email]})]});}else{return/*#__PURE__*/_jsx(\"div\",{className:\"seller-info-div\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Loading Seller Details...\"})});}};if(!loaded){return/*#__PURE__*/_jsx(\"h1\",{children:\"Loading...\"});}return/*#__PURE__*/_jsx(Layout,{user:props.user,children:/*#__PURE__*/_jsx(\"div\",{className:\"product-info\",children:/*#__PURE__*/_jsx(\"div\",{className:\"border\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"details-card\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"name\",children:gnome.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"image-and-details\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"img-div\",children:/*#__PURE__*/_jsx(\"img\",{className:\"details-img\",src:gnome.image_url,alt:gnome.name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"details\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"label-input\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"labels\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"price\",children:\"Price:\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"price\",children:[\"$\",gnome.price]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"label-input\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"labels\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",className:\"details-label\",id:\"desc-label\",children:\"Details:\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:/*#__PURE__*/_jsx(\"div\",{id:\"description\",children:gnome.details})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"label-input\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"labels\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"materials\",className:\"details-label\",children:\"Materials:\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:/*#__PURE__*/_jsx(\"div\",{id:\"materials\",children:gnome.materials})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"label-input\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"labels\",children:/*#__PURE__*/_jsx(\"label\",{htmlFor:\"collection\",className:\"details-label\",children:\"Collection:\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"text\",children:/*#__PURE__*/_jsx(\"div\",{id:\"collection\",children:gnome.category})})]}),showUserOptions()]})]})]})})})});}export default GnomeDetails;","map":{"version":3,"sources":["/home/jubran/general_assembly/sei/Flamingos/unit_3/homework/Gnome-A-zon/client/src/screens/ProductDetails/ProductDetails.jsx"],"names":["useState","useEffect","getGnome","deleteGnome","Layout","useParams","Link","useHistory","GnomeDetails","props","gnome","setGnome","loaded","setLoaded","id","history","fetchGnome","handleDelete","_id","push","showUserOptions","user","Object","keys","length","seller","username","email","name","image_url","price","details","materials","category"],"mappings":"geAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,MAAO,sBAAP,CACA,OAASC,QAAT,CAAmBC,WAAnB,KAAsC,uBAAtC,CACA,MAAOC,CAAAA,MAAP,KAAmB,oCAAnB,CACA,OAASC,SAAT,CAAoBC,IAApB,CAA0BC,UAA1B,KAA4C,kBAA5C,C,wFAEA,QAASC,CAAAA,YAAT,CAAsBC,KAAtB,CAA6B,CAC3B,cAA0BT,QAAQ,CAAC,EAAD,CAAlC,wCAAOU,KAAP,eAAcC,QAAd,eACA,eAA4BX,QAAQ,CAAC,IAAD,CAApC,yCAAOY,MAAP,eAAeC,SAAf,eACA,eAAeR,SAAS,EAAxB,CAAQS,EAAR,YAAQA,EAAR,CACA,GAAMC,CAAAA,OAAO,CAAGR,UAAU,EAA1B,CAEAN,SAAS,CAAC,UAAM,CACd,GAAMe,CAAAA,UAAU,0FAAG,mKACGd,CAAAA,QAAQ,CAACY,EAAD,CADX,QACXJ,KADW,eAEjBC,QAAQ,CAACD,KAAD,CAAR,CACAG,SAAS,CAACH,KAAD,CAAT,CAHiB,sDAAH,kBAAVM,CAAAA,UAAU,0CAAhB,CAMAA,UAAU,GACX,CARQ,CAQN,CAACF,EAAD,CARM,CAAT,CAWA,GAAMG,CAAAA,YAAY,2FAAG,+JACbd,CAAAA,WAAW,CAACO,KAAK,CAACQ,GAAP,CADE,QAEnBH,OAAO,CAACI,IAAR,CAAa,SAAb,EAFmB,wDAAH,kBAAZF,CAAAA,YAAY,2CAAlB,CAKA,GAAMG,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC5B,GAAGX,KAAK,CAACY,IAAN,EAAcX,KAAd,EAAuBY,MAAM,CAACC,IAAP,CAAYb,KAAZ,EAAmBc,MAAnB,GAA4B,CAAtD,CAAyD,CACvD,GAAGf,KAAK,CAACY,IAAN,CAAWP,EAAX,GAAgBJ,KAAK,CAACe,MAAN,CAAaP,GAAhC,CAAqC,CACnC,mBACE,aAAK,EAAE,CAAC,SAAR,wBACE,KAAC,IAAD,EAAM,EAAE,iBAAWR,KAAK,CAACQ,GAAjB,CAAR,uBACE,eAAQ,SAAS,CAAC,gBAAlB,CAAmC,EAAE,CAAC,MAAtC,kBADF,EADF,cAIE,eAAQ,EAAE,CAAC,QAAX,CAAoB,OAAO,CAAED,YAA7B,oBAJF,GADF,CAUD,CAXD,IAWO,CACL,mBACE,aAAK,SAAS,CAAC,iBAAf,wBACE,WAAG,EAAE,CAAC,MAAN,wBAAa,kCAAb,KAAoCP,KAAK,CAACe,MAAN,CAAaC,QAAjD,GADF,cAEE,WAAG,EAAE,CAAC,OAAN,CAAa,IAAI,mBAAahB,KAAK,CAACe,MAAN,CAAaE,KAA1B,CAAjB,wBAAoD,gCAApD,KAAyEjB,KAAK,CAACe,MAAN,CAAaE,KAAtF,GAFF,GADF,CAMD,CACF,CApBD,IAoBO,IAAGjB,KAAK,EAAIY,MAAM,CAACC,IAAP,CAAYb,KAAZ,EAAmBc,MAAnB,GAA4B,CAAxC,CAA2C,CAChD,mBACE,aAAK,SAAS,CAAC,iBAAf,wBACE,iCAAad,KAAK,CAACe,MAAN,CAAaC,QAA1B,GADF,cAEE,WAAG,IAAI,mBAAahB,KAAK,CAACe,MAAN,CAAaE,KAA1B,CAAP,qBAAkDjB,KAAK,CAACe,MAAN,CAAaE,KAA/D,GAFF,GADF,CAMD,CAPM,IAOA,CACL,mBAEE,YAAK,SAAS,CAAC,iBAAf,uBACE,gDADF,EAFF,CAMD,CACF,CApCD,CAsCA,GAAI,CAACf,MAAL,CAAa,CACX,mBAAQ,kCAAR,CACD,CAED,mBACE,KAAC,MAAD,EAAQ,IAAI,CAAEH,KAAK,CAACY,IAApB,uBACE,YAAK,SAAS,CAAC,cAAf,uBACE,YAAK,SAAS,CAAC,QAAf,uBACE,aAAK,SAAS,CAAC,cAAf,wBACE,YAAK,EAAE,CAAC,MAAR,UAAgBX,KAAK,CAACkB,IAAtB,EADF,cAEE,aAAK,SAAS,CAAC,mBAAf,wBACE,YAAK,SAAS,CAAC,SAAf,uBACE,YACE,SAAS,CAAC,aADZ,CAEE,GAAG,CAAElB,KAAK,CAACmB,SAFb,CAGE,GAAG,CAAEnB,KAAK,CAACkB,IAHb,EADF,EADF,cAQE,aAAK,SAAS,CAAC,SAAf,wBACE,aAAK,SAAS,CAAC,aAAf,wBACE,YAAK,SAAS,CAAC,QAAf,uBACE,cAAO,OAAO,CAAC,OAAf,oBADF,EADF,cAIE,YAAK,SAAS,CAAC,MAAf,uBACE,aAAK,EAAE,CAAC,OAAR,eAAkBlB,KAAK,CAACoB,KAAxB,GADF,EAJF,GADF,cAUE,aAAK,SAAS,CAAC,aAAf,wBACE,YAAK,SAAS,CAAC,QAAf,uBACE,cACE,OAAO,CAAC,aADV,CAEE,SAAS,CAAC,eAFZ,CAGE,EAAE,CAAC,YAHL,sBADF,EADF,cAUE,YAAK,SAAS,CAAC,MAAf,uBACE,YAAK,EAAE,CAAC,aAAR,UAAuBpB,KAAK,CAACqB,OAA7B,EADF,EAVF,GAVF,cAyBI,aAAK,SAAS,CAAC,aAAf,wBACE,YAAK,SAAS,CAAC,QAAf,uBACE,cAAO,OAAO,CAAC,WAAf,CAA2B,SAAS,CAAC,eAArC,wBADF,EADF,cAME,YAAK,SAAS,CAAC,MAAf,uBACE,YAAK,EAAE,CAAC,WAAR,UAAqBrB,KAAK,CAACsB,SAA3B,EADF,EANF,GAzBJ,cAmCI,aAAK,SAAS,CAAC,aAAf,wBACE,YAAK,SAAS,CAAC,QAAf,uBACE,cAAO,OAAO,CAAC,YAAf,CAA4B,SAAS,CAAC,eAAtC,yBADF,EADF,cAME,YAAK,SAAS,CAAC,MAAf,uBACE,YAAK,EAAE,CAAC,YAAR,UAAsBtB,KAAK,CAACuB,QAA5B,EADF,EANF,GAnCJ,CA6CKb,eAAe,EA7CpB,GARF,GAFF,GADF,EADF,EADF,EADF,CAmED,CAED,cAAeZ,CAAAA,YAAf","sourcesContent":["import { useState, useEffect } from \"react\";\nimport \"./ProductDetails.css\";\nimport { getGnome, deleteGnome } from \"../../services/gnomes\";\nimport Layout from \"../../components/Layout/Layout.jsx\";\nimport { useParams, Link, useHistory } from \"react-router-dom\";\n\nfunction GnomeDetails(props) {\n  const [gnome, setGnome] = useState({});\n  const [loaded, setLoaded] = useState(true);\n  const { id } = useParams();\n  const history = useHistory();\n\n  useEffect(() => {\n    const fetchGnome = async () => {\n      const gnome = await getGnome(id);\n      setGnome(gnome);\n      setLoaded(gnome);\n    }\n\n    fetchGnome();\n  }, [id]);\n\n\n  const handleDelete = async () => {\n    await deleteGnome(gnome._id);\n    history.push(\"/gnomes\")\n  }\n\n  const showUserOptions = () => {\n    if(props.user && gnome && Object.keys(gnome).length!==0) {\n      if(props.user.id===gnome.seller._id) {\n        return (\n          <div id=\"buttons\">\n            <Link to={`/edit/${gnome._id}`}>\n              <button className=\"btn-slide-left\" id=\"edit\">Edit</button>\n            </Link>\n            <button id=\"delete\" onClick={handleDelete}>\n              Delete\n            </button>\n          </div>\n        ) \n      } else {\n        return (\n          <div className=\"seller-info-div\">\n            <p id=\"sold\"><span>Sold by:</span> {gnome.seller.username}</p>\n            <a id=\"email\"href={`mailto: ${gnome.seller.email}`}><span>Email:</span> {gnome.seller.email}</a>\n          </div>\n        )\n      } \n    } else if(gnome && Object.keys(gnome).length!==0) {\n      return (\n        <div className=\"seller-info-div\">\n          <p>Sold by: {gnome.seller.username}</p>\n          <a href={`mailto: ${gnome.seller.email}`}>Email: {gnome.seller.email}</a>\n        </div>\n      )\n    } else {\n      return (\n\n        <div className=\"seller-info-div\">\n          <p>Loading Seller Details...</p>\n        </div>\n      )\n    }\n  }\n\n  if (!loaded) {\n    return (<h1>Loading...</h1>)\n  }\n\n  return (\n    <Layout user={props.user}>\n      <div className=\"product-info\">\n        <div className=\"border\">\n          <div className=\"details-card\">\n            <div id=\"name\">{gnome.name}</div>\n            <div className=\"image-and-details\">\n              <div className=\"img-div\">\n                <img\n                  className=\"details-img\"\n                  src={gnome.image_url}\n                  alt={gnome.name}\n                />\n              </div>\n              <div className=\"details\">\n                <div className=\"label-input\">\n                  <div className=\"labels\">\n                    <label htmlFor=\"price\">Price:</label>\n                  </div>\n                  <div className=\"text\">\n                    <div id=\"price\">${gnome.price}</div>\n                  </div>\n                </div>\n\n                <div className=\"label-input\">\n                  <div className=\"labels\">\n                    <label\n                      htmlFor=\"description\"\n                      className=\"details-label\"\n                      id=\"desc-label\"\n                    >\n                      Details:\n                    </label>\n                  </div>\n                  <div className=\"text\">\n                    <div id=\"description\">{gnome.details}</div>\n                  </div>\n                </div>\n\n                  <div className=\"label-input\">\n                    <div className=\"labels\">\n                      <label htmlFor=\"materials\" className=\"details-label\">\n                        Materials:\n                      </label>\n                    </div>\n                    <div className=\"text\">\n                      <div id=\"materials\">{gnome.materials}</div>\n                    </div>\n                  </div>\n                  <div className=\"label-input\">\n                    <div className=\"labels\">\n                      <label htmlFor=\"collection\" className=\"details-label\">\n                        Collection:\n                      </label>\n                    </div>\n                    <div className=\"text\">\n                      <div id=\"collection\">{gnome.category}</div>\n                    </div>\n                  </div>\n                  {showUserOptions()}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </Layout>\n  );\n}\n\nexport default GnomeDetails;\n"]},"metadata":{},"sourceType":"module"}